h1. Rack RESTful Submit

Implements support of RESTful resources with Rails MVC when Javascript is off and bulk operations are required with multiple submit buttons.

h2. Rack Builder

<pre><code>
require 'rack-restful_submit'
use Rack::RestfulSubmit
</code></pre>

h2. Rails integration

h3. Install GEM without Bundler

Insert into config/environment.rb:
<pre><code>
config.gem "rack-restful_submit"
</code></pre>

Run:
<pre><code>
rake gems:install
</code></pre>

h3. Install GEM with Bundler

Insert into Gemfile:
<pre><code>
gem "rack-restful_submit"
</code></pre>

Run:
<pre><code>
bundle install
</code></pre>

h3. Integration

Insert into config/environment.rb:
<pre><code>
config.middleware.insert_after Rack::MethodOverride, 'Rack::RestfulSubmit'
</code></pre>

h2. Usage

In the example below you can see that using submit input with '__rewrite' name and 'multi_destroy' mapping allows
us to convert normal POST request into RESTful one. Don't forget to also insert 2 hidden fields URL and METHOD as shown below.
*NOTE:* I'm aware of that adding collection to RESTfull controller ins't very RESTfull but this is only example of this GEM. If you want fully RESTfull create new controller for the bulk operations.

Example of industries/index.html.erb
<pre><code>
<h1>Listing industries</h1>

<form method="post">
<table>
  <tr>
    <th>Name</th>
    <th>Description</th>
  </tr>

<% @industries.each do |industry| %>
  <tr>
    <td><%=h check_box_tag 'industry_ids[]', industry.id %></td>
    <td><%=h link_to industry.name, industry %></td>
    <td><%=h industry.description %></td>
    <td><%= link_to 'Edit', edit_industry_path(industry) %></td>
  </tr>
<% end %>
</table>

<input type="hidden" name="__map[multi_destroy][url]" value="<%= destroy_multiple_industries_url %>" />
<input type="hidden" name="__map[multi_destroy][method]" value="DELETE" />
<input type="submit" name="__rewrite[multi_destroy]" value="Destroy">

</form>

<br />

<%= link_to 'New industry', new_industry_path %>
</code></pre>

Routes:
<pre><code>
map.resources :industries, :collection => { :destroy_multiple => :delete }
</code></pre>

h2. Contribute

The Github way: Fork Me, Hack, Push, Send Pull Request
